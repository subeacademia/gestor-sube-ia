<div class="dashboard-container">
  <app-header (logoutEvent)="onLogout()"></app-header>

  <main class="dashboard-main">
    <div class="dashboard-content">
      <!-- TÃ­tulo del Dashboard -->
      <div class="dashboard-header">
        <h1>ğŸ“Š Panel de Control SUBE IA</h1>
        <p>VisiÃ³n general del negocio y mÃ©tricas clave para la toma de decisiones</p>
      </div>

      <!-- Indicador de carga -->
      <div *ngIf="cargando" class="loading-container">
        <div class="loading-spinner"></div>
        <p>Cargando datos del dashboard...</p>
      </div>

      <!-- Contenido principal cuando no estÃ¡ cargando -->
      <div *ngIf="!cargando" class="dashboard-content-main">
        <!-- Tarjetas de KPIs -->
        <div class="kpis-section">
          <h2 class="section-title">ğŸ“ˆ Indicadores Clave de Rendimiento</h2>
          <div class="kpis-grid">
            <div class="kpi-card">
              <div class="kpi-icon">ğŸ“‹</div>
              <div class="kpi-content">
                <h3>Total Cotizaciones</h3>
                <p class="kpi-value">{{ kpis.totalCotizaciones }}</p>
                <span class="kpi-description">Cotizaciones generadas</span>
              </div>
            </div>
            
            <div class="kpi-card">
              <div class="kpi-icon">ğŸ’°</div>
              <div class="kpi-content">
                <h3>Valor Total</h3>
                <p class="kpi-value">{{ formatearMoneda(kpis.valorTotalCotizaciones) }}</p>
                <span class="kpi-description">Valor de todas las cotizaciones</span>
              </div>
            </div>
            
            <div class="kpi-card">
              <div class="kpi-icon">âœ…</div>
              <div class="kpi-content">
                <h3>Contratos Cerrados</h3>
                <p class="kpi-value">{{ kpis.totalContratosCerrados }}</p>
                <span class="kpi-description">Contratos firmados</span>
              </div>
            </div>
            
            <div class="kpi-card">
              <div class="kpi-icon">ğŸ“Š</div>
              <div class="kpi-content">
                <h3>Tasa de ConversiÃ³n</h3>
                <p class="kpi-value">{{ kpis.tasaConversion }}%</p>
                <span class="kpi-description">Aceptadas â†’ Firmadas</span>
              </div>
            </div>
          </div>
        </div>

        <!-- GrÃ¡ficos -->
        <div class="charts-section">
          <h2 class="section-title">ğŸ“Š AnÃ¡lisis de Datos</h2>
          
          <!-- GrÃ¡fico de Tendencia de Ventas -->
          <div class="chart-container">
            <div class="chart-header">
              <h3>ğŸ“ˆ Tendencia de Ventas</h3>
              <p>EvoluciÃ³n mensual de cotizaciones aceptadas vs contratos firmados</p>
            </div>
            <div class="chart-wrapper">
              <canvas #tendenciasVentasChart></canvas>
            </div>
          </div>

          <!-- GrÃ¡fico de Rendimiento por Usuario -->
          <div class="chart-container">
            <div class="chart-header">
              <h3>ğŸ‘¥ Rendimiento por Usuario</h3>
              <p>Cantidad de cotizaciones aceptadas por cada usuario</p>
            </div>
            <div class="chart-wrapper">
              <canvas #rendimientoUsuariosChart></canvas>
            </div>
          </div>

          <!-- GrÃ¡fico de Embudo de Ventas -->
          <div class="chart-container">
            <div class="chart-header">
              <h3>ğŸ¯ Embudo de Ventas</h3>
              <p>DistribuciÃ³n de cotizaciones por estado en el proceso de venta</p>
            </div>
            <div class="chart-wrapper">
              <canvas #embudoVentasChart></canvas>
            </div>
          </div>
        </div>

        <!-- Tarjetas de NavegaciÃ³n -->
        <div class="navigation-section">
          <h2 class="section-title">ğŸš€ Acciones RÃ¡pidas</h2>
          <div class="navigation-cards">
            <!-- GestiÃ³n de Cotizaciones -->
            <div class="nav-card" routerLink="/cotizaciones">
              <div class="nav-card-icon">ğŸ“Š</div>
              <div class="nav-card-content">
                <h3>GestiÃ³n de Cotizaciones</h3>
                <p>Administra cotizaciones, estadÃ­sticas y filtros avanzados</p>
                <div class="nav-card-features">
                  <span class="feature">ğŸ“‹ Cotizaciones</span>
                  <span class="feature">ğŸ“ˆ EstadÃ­sticas</span>
                  <span class="feature">ğŸ” Filtros</span>
                </div>
              </div>
              <div class="nav-card-arrow">â†’</div>
            </div>

            <!-- GestiÃ³n de Contratos -->
            <div class="nav-card" routerLink="/contratos">
              <div class="nav-card-icon">ğŸ“„</div>
              <div class="nav-card-content">
                <h3>GestiÃ³n de Contratos</h3>
                <p>Administra contratos, firmas digitales y seguimiento</p>
                <div class="nav-card-features">
                  <span class="feature">ğŸ“ Contratos</span>
                  <span class="feature">âœï¸ Firmas</span>
                  <span class="feature">ğŸ“Š Seguimiento</span>
                </div>
              </div>
              <div class="nav-card-arrow">â†’</div>
            </div>

            <!-- Crear CotizaciÃ³n -->
            <div class="nav-card" routerLink="/cotizaciones/crear">
              <div class="nav-card-icon">â•</div>
              <div class="nav-card-content">
                <h3>Crear Nueva CotizaciÃ³n</h3>
                <p>Genera cotizaciones personalizadas para clientes</p>
                <div class="nav-card-features">
                  <span class="feature">ğŸ¯ Personalizada</span>
                  <span class="feature">ğŸ’° Precios</span>
                  <span class="feature">ğŸ“§ EnvÃ­o</span>
                </div>
              </div>
              <div class="nav-card-arrow">â†’</div>
            </div>

            <!-- ConfiguraciÃ³n -->
            <div class="nav-card">
              <div class="nav-card-icon">âš™ï¸</div>
              <div class="nav-card-content">
                <h3>ConfiguraciÃ³n</h3>
                <p>Configura el sistema y gestiona usuarios</p>
                <div class="nav-card-features">
                  <span class="feature">ğŸ‘¥ Usuarios</span>
                  <span class="feature">ğŸ”§ Sistema</span>
                  <span class="feature">ğŸ“Š Reportes</span>
                </div>
              </div>
              <div class="nav-card-arrow">â†’</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>
