<!-- ===== DASHBOARD INTERACTIVO ===== -->
<div class="dashboard-container">
  
  <!-- Header del Dashboard -->
  <app-header></app-header>
  
  <!-- Contenido Principal -->
  <main class="dashboard-main">
    
    <!-- T√≠tulo del Dashboard -->
    <div class="dashboard-header">
      <h1 class="dashboard-title">
        <span class="title-icon">üìä</span>
        Dashboard de Inteligencia de Negocio
      </h1>
      <p class="dashboard-subtitle">
        M√©tricas clave y an√°lisis de rendimiento en tiempo real
      </p>
    </div>
    
    <!-- Tarjetas de KPIs -->
    <section class="kpis-section">
      <h2 class="section-title">Indicadores Clave de Rendimiento</h2>
      
      <div class="kpis-grid">
        <!-- Total de Cotizaciones -->
        <app-stat-card
          title="Total Cotizaciones"
          value="{{ totalCotizaciones }}"
          icon="üìã"
          color="primary"
          trend="up"
          trendValue="+12%"
          description="Cotizaciones generadas">
        </app-stat-card>
        
        <!-- Valor Total de Cotizaciones -->
        <app-stat-card
          title="Valor Total"
          value="{{ formatearMoneda(valorTotalCotizaciones) }}"
          icon="üí∞"
          color="success"
          trend="up"
          trendValue="+8%"
          description="Valor acumulado de cotizaciones">
        </app-stat-card>
        
        <!-- Contratos Cerrados -->
        <app-stat-card
          title="Contratos Firmados"
          value="{{ totalContratosCerrados }}"
          icon="‚úÖ"
          color="info"
          trend="up"
          trendValue="+15%"
          description="Contratos exitosamente firmados">
        </app-stat-card>
        
        <!-- Tasa de Conversi√≥n -->
        <app-stat-card
          title="Tasa de Conversi√≥n"
          value="{{ tasaConversion }}%"
          icon="üìà"
          color="warning"
          trend="up"
          trendValue="+5%"
          description="Cotizaciones que se convirtieron en contratos">
        </app-stat-card>
        
        <!-- Cotizaciones Aceptadas -->
        <app-stat-card
          title="Cotizaciones Aceptadas"
          value="{{ cotizacionesAceptadas }}"
          icon="üéØ"
          color="success"
          trend="up"
          trendValue="+18%"
          description="Cotizaciones aprobadas por clientes">
        </app-stat-card>
        
        <!-- Cotizaciones Pendientes -->
        <app-stat-card
          title="Cotizaciones Pendientes"
          value="{{ cotizacionesPendientes }}"
          icon="‚è≥"
          color="warning"
          trend="down"
          trendValue="-3%"
          description="En proceso de revisi√≥n">
        </app-stat-card>
      </div>
    </section>
    
    <!-- Indicadores Estrat√©gicos -->
    <section class="strategic-section">
      <h2 class="section-title">Indicadores Estrat√©gicos del Negocio</h2>
      
      <div class="strategic-grid">
        <!-- An√°lisis de Rentabilidad -->
        <div class="strategic-card">
          <div class="strategic-header">
            <div class="strategic-icon">üìä</div>
            <h3 class="strategic-title">An√°lisis de Rentabilidad</h3>
          </div>
          <div class="strategic-content">
            <div class="strategic-item">
              <div class="strategic-item-label">Margen Promedio</div>
              <div class="strategic-item-value">{{ margenPromedio }}%</div>
              <div class="strategic-item-description">Margen de utilidad promedio</div>
            </div>
            <div class="strategic-item">
              <div class="strategic-item-label">Servicio M√°s Rentable</div>
              <div class="strategic-item-value">{{ servicioMasRentable || 'N/A' }}</div>
              <div class="strategic-item-description">Servicio con mayor valor</div>
            </div>
            <div class="strategic-item">
              <div class="strategic-item-label">Costo de Adquisici√≥n</div>
              <div class="strategic-item-value">{{ formatearMoneda(costoAcquisicion) }}</div>
              <div class="strategic-item-description">Costo por cliente adquirido</div>
            </div>
          </div>
        </div>

        <!-- Eficiencia de Ventas -->
        <div class="strategic-card">
          <div class="strategic-header">
            <div class="strategic-icon">üéØ</div>
            <h3 class="strategic-title">Eficiencia de Ventas</h3>
          </div>
          <div class="strategic-content">
            <div class="strategic-item">
              <div class="strategic-item-label">Tiempo Promedio Cierre</div>
              <div class="strategic-item-value">{{ tiempoPromedioCierre }} d√≠as</div>
              <div class="strategic-item-description">D√≠as para cerrar venta</div>
            </div>
            <div class="strategic-item">
              <div class="strategic-item-label">Tasa de Rechazo</div>
              <div class="strategic-item-value">{{ tasaRechazo }}%</div>
              <div class="strategic-item-description">Cotizaciones rechazadas</div>
            </div>
            <div class="strategic-item">
              <div class="strategic-item-label">Mejor Vendedor</div>
              <div class="strategic-item-value">{{ mejorVendedor || 'N/A' }}</div>
              <div class="strategic-item-description">Vendedor m√°s eficiente</div>
            </div>
          </div>
        </div>

        <!-- Tendencias de Crecimiento -->
        <div class="strategic-card">
          <div class="strategic-header">
            <div class="strategic-icon">üìà</div>
            <h3 class="strategic-title">Tendencias de Crecimiento</h3>
          </div>
          <div class="strategic-content">
            <div class="strategic-item">
              <div class="strategic-item-label">Crecimiento Mensual</div>
              <div class="strategic-item-value">{{ crecimientoMensual }}%</div>
              <div class="strategic-item-description">vs mes anterior</div>
            </div>
            <div class="strategic-item">
              <div class="strategic-item-label">Proyecci√≥n Trimestral</div>
              <div class="strategic-item-value">{{ proyeccionTrimestral }}</div>
              <div class="strategic-item-description">Cotizaciones esperadas</div>
            </div>
            <div class="strategic-item">
              <div class="strategic-item-label">Estacionalidad</div>
              <div class="strategic-item-value">{{ estacionalidad || 'N/A' }}</div>
              <div class="strategic-item-description">Mes con mayor actividad</div>
            </div>
          </div>
        </div>

        <!-- Velocidad Operacional -->
        <div class="strategic-card">
          <div class="strategic-header">
            <div class="strategic-icon">‚ö°</div>
            <h3 class="strategic-title">Velocidad Operacional</h3>
          </div>
          <div class="strategic-content">
            <div class="strategic-item">
              <div class="strategic-item-label">Tiempo de Respuesta</div>
              <div class="strategic-item-value">{{ tiempoRespuesta }} hrs</div>
              <div class="strategic-item-description">Respuesta promedio</div>
            </div>
            <div class="strategic-item">
              <div class="strategic-item-label">Velocidad Procesamiento</div>
              <div class="strategic-item-value">{{ velocidadProcesamiento }}/d√≠a</div>
              <div class="strategic-item-description">Cotizaciones por d√≠a</div>
            </div>
            <div class="strategic-item">
              <div class="strategic-item-label">Satisfacci√≥n Cliente</div>
              <div class="strategic-item-value">{{ satisfaccionCliente }}%</div>
              <div class="strategic-item-description">Tasa de satisfacci√≥n</div>
            </div>
          </div>
        </div>
      </div>
    </section>
    
    <!-- Gr√°ficos de An√°lisis -->
    <section class="charts-section">
      <h2 class="section-title">An√°lisis de Rendimiento</h2>
      
      <div class="charts-grid">
        
        <!-- Gr√°fico de Tendencia de Ventas -->
        <div class="chart-container">
          <div class="chart-header">
            <h3 class="chart-title">Tendencia de Ventas</h3>
            <p class="chart-description">Evoluci√≥n de cotizaciones y contratos en los √∫ltimos 6 meses</p>
          </div>
          <div class="chart-wrapper">
            <canvas id="tendenciasVentasChart"></canvas>
          </div>
        </div>
        
        <!-- Gr√°fico de Rendimiento por Usuario -->
        <div class="chart-container">
          <div class="chart-header">
            <h3 class="chart-title">Rendimiento por Usuario</h3>
            <p class="chart-description">Cotizaciones aceptadas por atendedor</p>
          </div>
          <div class="chart-wrapper">
            <canvas id="rendimientoUsuariosChart"></canvas>
          </div>
        </div>
        
        <!-- Gr√°fico de Embudo de Ventas -->
        <div class="chart-container">
          <div class="chart-header">
            <h3 class="chart-title">Embudo de Ventas</h3>
            <p class="chart-description">Distribuci√≥n de cotizaciones por estado</p>
          </div>
          <div class="chart-wrapper">
            <canvas id="embudoVentasChart"></canvas>
          </div>
        </div>
        
      </div>
    </section>
    
    <!-- M√©tricas Detalladas -->
    <section class="metrics-section">
      <h2 class="section-title">M√©tricas Detalladas del Negocio</h2>
      
      <div class="metrics-grid">
        <!-- M√©tricas de Servicios -->
        <div class="metric-card">
          <div class="metric-header">
            <div class="metric-icon">üõ†Ô∏è</div>
            <h3 class="metric-title">An√°lisis de Servicios</h3>
          </div>
          <div class="metric-content">
            <div class="metric-item">
              <div class="metric-item-label">Servicios M√°s Vendidos</div>
              <div class="metric-item-value">{{ servicioMasVendido || 'N/A' }}</div>
              <div class="metric-item-description">Servicio con m√°s cotizaciones</div>
            </div>
            <div class="metric-item">
              <div class="metric-item-label">Valor Promedio</div>
              <div class="metric-item-value">{{ formatearMoneda(valorPromedio) }}</div>
              <div class="metric-item-description">Promedio por cotizaci√≥n</div>
            </div>
            <div class="metric-item">
              <div class="metric-item-label">Tiempo Promedio</div>
              <div class="metric-item-value">{{ tiempoPromedio || 'N/A' }}</div>
              <div class="metric-item-description">D√≠as para cerrar</div>
            </div>
          </div>
        </div>

        <!-- M√©tricas de Clientes -->
        <div class="metric-card">
          <div class="metric-header">
            <div class="metric-icon">üë•</div>
            <h3 class="metric-title">An√°lisis de Clientes</h3>
          </div>
          <div class="metric-content">
            <div class="metric-item">
              <div class="metric-item-label">Clientes Activos</div>
              <div class="metric-item-value">{{ clientesActivos }}</div>
              <div class="metric-item-description">Clientes con cotizaciones</div>
            </div>
            <div class="metric-item">
              <div class="metric-item-label">Cliente Top</div>
              <div class="metric-item-value">{{ clienteTop || 'N/A' }}</div>
              <div class="metric-item-description">Mayor valor generado</div>
            </div>
            <div class="metric-item">
              <div class="metric-item-label">Retenci√≥n</div>
              <div class="metric-item-value">{{ tasaRetencion }}%</div>
              <div class="metric-item-description">Clientes recurrentes</div>
            </div>
          </div>
        </div>

        <!-- M√©tricas de Rendimiento -->
        <div class="metric-card">
          <div class="metric-header">
            <div class="metric-icon">üìà</div>
            <h3 class="metric-title">Rendimiento Operacional</h3>
          </div>
          <div class="metric-content">
            <div class="metric-item">
              <div class="metric-item-label">Eficiencia</div>
              <div class="metric-item-value">{{ eficiencia }}%</div>
              <div class="metric-item-description">Cotizaciones exitosas</div>
            </div>
            <div class="metric-item">
              <div class="metric-item-label">Velocidad</div>
              <div class="metric-item-value">{{ velocidadPromedio || 'N/A' }}</div>
              <div class="metric-item-description">D√≠as promedio</div>
            </div>
            <div class="metric-item">
              <div class="metric-item-label">Crecimiento</div>
              <div class="metric-item-value">{{ tasaCrecimiento }}%</div>
              <div class="metric-item-description">vs mes anterior</div>
            </div>
          </div>
        </div>
      </div>
    </section>
    
    <!-- Resumen de Actividad -->
    <section class="activity-section">
      <h2 class="section-title">Resumen de Actividad</h2>
      
      <div class="activity-grid">
        
        <!-- Actividad Reciente -->
        <div class="activity-card">
          <div class="activity-header">
            <h3 class="activity-title">
              <span class="activity-icon">üïí</span>
              Actividad Reciente
            </h3>
          </div>
          <div class="activity-content">
            <div class="activity-item">
              <div class="activity-dot success"></div>
              <div class="activity-info">
                <p class="activity-text">Nueva cotizaci√≥n creada</p>
                <span class="activity-time">Hace 2 minutos</span>
              </div>
            </div>
            <div class="activity-item">
              <div class="activity-dot info"></div>
              <div class="activity-info">
                <p class="activity-text">Contrato firmado exitosamente</p>
                <span class="activity-time">Hace 15 minutos</span>
              </div>
            </div>
            <div class="activity-item">
              <div class="activity-dot warning"></div>
              <div class="activity-info">
                <p class="activity-text">Cotizaci√≥n enviada al cliente</p>
                <span class="activity-time">Hace 1 hora</span>
              </div>
            </div>
            <div class="activity-item">
              <div class="activity-dot primary"></div>
              <div class="activity-info">
                <p class="activity-text">Nuevo usuario registrado</p>
                <span class="activity-time">Hace 2 horas</span>
              </div>
            </div>
          </div>
        </div>
        
        <!-- M√©tricas R√°pidas -->
        <div class="metrics-card">
          <div class="metrics-header">
            <h3 class="metrics-title">
              <span class="metrics-icon">‚ö°</span>
              M√©tricas R√°pidas
            </h3>
          </div>
          <div class="metrics-content">
            <div class="metric-item">
              <div class="metric-label">Promedio de Respuesta</div>
              <div class="metric-value">2.3 d√≠as</div>
            </div>
            <div class="metric-item">
              <div class="metric-label">Tiempo Promedio de Firma</div>
              <div class="metric-value">1.8 d√≠as</div>
            </div>
            <div class="metric-item">
              <div class="metric-label">Satisfacci√≥n del Cliente</div>
              <div class="metric-value">4.8/5.0</div>
            </div>
            <div class="metric-item">
              <div class="metric-label">Eficiencia del Proceso</div>
              <div class="metric-value">87%</div>
            </div>
          </div>
        </div>
        
      </div>
    </section>
    
    <!-- Acciones R√°pidas -->
    <section class="navigation-section">
      <h2 class="section-title">Acciones R√°pidas</h2>
      <div class="navigation-cards">
        <!-- Gesti√≥n de Cotizaciones -->
        <div class="nav-card" routerLink="/cotizaciones">
          <div class="nav-card-icon">üìä</div>
          <div class="nav-card-content">
            <h3>Gesti√≥n de Cotizaciones</h3>
            <p>Administra cotizaciones, estad√≠sticas y filtros avanzados</p>
            <div class="nav-card-features">
              <span class="feature">üìã Cotizaciones</span>
              <span class="feature">üìà Estad√≠sticas</span>
              <span class="feature">üîç Filtros</span>
            </div>
          </div>
          <div class="nav-card-arrow">‚Üí</div>
        </div>

        <!-- Gesti√≥n de Contratos -->
        <div class="nav-card" routerLink="/contratos">
          <div class="nav-card-icon">üìÑ</div>
          <div class="nav-card-content">
            <h3>Gesti√≥n de Contratos</h3>
            <p>Administra contratos, firmas digitales y seguimiento</p>
            <div class="nav-card-features">
              <span class="feature">üìù Contratos</span>
              <span class="feature">‚úçÔ∏è Firmas</span>
              <span class="feature">üìä Seguimiento</span>
            </div>
          </div>
          <div class="nav-card-arrow">‚Üí</div>
        </div>

        <!-- Crear Cotizaci√≥n -->
        <div class="nav-card" routerLink="/cotizaciones/crear">
          <div class="nav-card-icon">‚ûï</div>
          <div class="nav-card-content">
            <h3>Crear Nueva Cotizaci√≥n</h3>
            <p>Genera cotizaciones personalizadas para clientes</p>
            <div class="nav-card-features">
              <span class="feature">üéØ Personalizada</span>
              <span class="feature">üí∞ Precios</span>
              <span class="feature">üìß Env√≠o</span>
            </div>
          </div>
          <div class="nav-card-arrow">‚Üí</div>
        </div>

        <!-- Configuraci√≥n -->
        <div class="nav-card">
          <div class="nav-card-icon">‚öôÔ∏è</div>
          <div class="nav-card-content">
            <h3>Configuraci√≥n</h3>
            <p>Configura el sistema y gestiona usuarios</p>
            <div class="nav-card-features">
              <span class="feature">üë• Usuarios</span>
              <span class="feature">üîß Sistema</span>
              <span class="feature">üìä Reportes</span>
            </div>
          </div>
          <div class="nav-card-arrow">‚Üí</div>
        </div>
      </div>
    </section>
    
  </main>
  
</div>
