<div class="dashboard-container">
  <app-header (logoutEvent)="onLogout()"></app-header>

  <main class="dashboard-main">
    <div class="dashboard-content">
      <!-- TÃ­tulo del Dashboard -->
      <div class="dashboard-header">
        <h1>ğŸ“Š Panel de AdministraciÃ³n</h1>
        <p>Bienvenido al sistema de gestiÃ³n SUBE IA</p>
      </div>

      <!-- Indicador de carga -->
      <div *ngIf="cargando" class="loading-container">
        <div class="loading-spinner"></div>
        <p>Cargando datos del dashboard...</p>
      </div>

      <!-- Contenido principal cuando no estÃ¡ cargando -->
      <div *ngIf="!cargando" class="dashboard-content-main">
        <!-- Tarjetas de EstadÃ­sticas -->
        <div class="stats-section">
          <app-stat-card 
            title="Total Cotizaciones" 
            [value]="estadisticas.totalCotizaciones.toString()" 
            icon="ğŸ“‹"
            color="primary">
          </app-stat-card>
          
          <app-stat-card 
            title="Este Mes" 
            [value]="estadisticas.cotizacionesMes.toString()" 
            icon="ğŸ“…"
            color="info">
          </app-stat-card>
          
          <app-stat-card 
            title="Valor Total" 
            [value]="formatearMoneda(estadisticas.valorTotal)" 
            icon="ğŸ’°"
            color="success">
          </app-stat-card>
          
          <app-stat-card 
            title="Total Aceptado" 
            [value]="formatearMoneda(estadisticas.totalAceptadas)" 
            icon="âœ…"
            color="warning">
          </app-stat-card>
          
          <app-stat-card 
            title="Total Contratos" 
            [value]="estadisticas.totalContratos.toString()" 
            icon="ğŸ“„"
            color="secondary">
          </app-stat-card>
          
          <app-stat-card 
            title="Contratos Pendientes" 
            [value]="estadisticas.contratosPendientes.toString()" 
            icon="â³"
            color="danger">
          </app-stat-card>
          
          <app-stat-card 
            title="Tasa de Ã‰xito" 
            [value]="estadisticas.tasaExito + '%'" 
            icon="ğŸ“ˆ"
            color="accent">
          </app-stat-card>
        </div>

        <!-- GrÃ¡ficos -->
        <div class="charts-section">
          <!-- GrÃ¡fico de Tendencias -->
          <div class="chart-container">
            <div class="chart-header">
              <h3>ğŸ“ˆ Tendencias de Cotizaciones</h3>
              <p>EvoluciÃ³n mensual de cotizaciones y valores</p>
            </div>
            <div class="chart-wrapper">
              <canvas #tendenciasChart></canvas>
            </div>
          </div>

          <!-- GrÃ¡fico de Estados -->
          <div class="chart-container">
            <div class="chart-header">
              <h3>ğŸ¯ DistribuciÃ³n por Estados</h3>
              <p>DistribuciÃ³n de cotizaciones por estado actual</p>
            </div>
            <div class="chart-wrapper">
              <canvas #estadosChart></canvas>
            </div>
          </div>

          <!-- GrÃ¡fico de Ventas -->
          <div class="chart-container">
            <div class="chart-header">
              <h3>ğŸ’° Ventas Mensuales</h3>
              <p>Ventas totales por mes (cotizaciones aceptadas + contratos)</p>
            </div>
            <div class="chart-wrapper">
              <canvas #ventasChart></canvas>
            </div>
          </div>
        </div>

        <!-- Tarjetas de NavegaciÃ³n -->
        <div class="navigation-section">
          <h2>ğŸš€ Acciones RÃ¡pidas</h2>
          <div class="navigation-cards">
            <!-- Panel de AdministraciÃ³n -->
            <div class="nav-card" routerLink="/cotizaciones">
              <div class="nav-card-icon">ğŸ“Š</div>
              <div class="nav-card-content">
                <h3>GestiÃ³n de Cotizaciones</h3>
                <p>Administra cotizaciones, estadÃ­sticas y filtros avanzados</p>
                <div class="nav-card-features">
                  <span class="feature">ğŸ“‹ Cotizaciones</span>
                  <span class="feature">ğŸ“ˆ EstadÃ­sticas</span>
                  <span class="feature">ğŸ” Filtros</span>
                </div>
              </div>
              <div class="nav-card-arrow">â†’</div>
            </div>

            <!-- GestiÃ³n de Contratos -->
            <div class="nav-card" routerLink="/contratos">
              <div class="nav-card-icon">ğŸ“„</div>
              <div class="nav-card-content">
                <h3>GestiÃ³n de Contratos</h3>
                <p>Administra contratos, firmas digitales y seguimiento</p>
                <div class="nav-card-features">
                  <span class="feature">ğŸ“ Contratos</span>
                  <span class="feature">âœï¸ Firmas</span>
                  <span class="feature">ğŸ“Š Seguimiento</span>
                </div>
              </div>
              <div class="nav-card-arrow">â†’</div>
            </div>

            <!-- Crear CotizaciÃ³n -->
            <div class="nav-card" routerLink="/cotizaciones/crear">
              <div class="nav-card-icon">â•</div>
              <div class="nav-card-content">
                <h3>Crear Nueva CotizaciÃ³n</h3>
                <p>Genera cotizaciones personalizadas para clientes</p>
                <div class="nav-card-features">
                  <span class="feature">ğŸ¯ Personalizada</span>
                  <span class="feature">ğŸ’° Precios</span>
                  <span class="feature">ğŸ“§ EnvÃ­o</span>
                </div>
              </div>
              <div class="nav-card-arrow">â†’</div>
            </div>

            <!-- ConfiguraciÃ³n -->
            <div class="nav-card">
              <div class="nav-card-icon">âš™ï¸</div>
              <div class="nav-card-content">
                <h3>ConfiguraciÃ³n</h3>
                <p>Configura el sistema y gestiona usuarios</p>
                <div class="nav-card-features">
                  <span class="feature">ğŸ‘¥ Usuarios</span>
                  <span class="feature">ğŸ”§ Sistema</span>
                  <span class="feature">ğŸ“Š Reportes</span>
                </div>
              </div>
              <div class="nav-card-arrow">â†’</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>
