<div class="cotizacion-card" 
     [class]="'card-estado-' + getEstadoClass()"
     [draggable]="draggable"
     (dragstart)="onDragStart($event)">
  
  <!-- Header con cÃ³digo y fecha -->
  <div class="cotizacion-header">
    <div class="codigo-section">
      <div class="codigo-icon">ğŸ“‹</div>
      <div class="codigo-info">
        <h3>{{ cotizacion.codigo || cotizacion.id }}</h3>
        <span class="fecha">{{ formatDate(cotizacion.fecha) }}</span>
      </div>
    </div>
    <div class="estado-badge" [class]="'estado-' + getEstadoClass()">
      <span class="estado-icon">{{ getEstadoIcon() }}</span>
      <span class="estado-text">{{ cotizacion.estado }}</span>
    </div>
  </div>
  
  <!-- InformaciÃ³n del cliente -->
  <div class="cotizacion-body">
    <div class="cliente-section">
      <div class="cliente-header">
        <span class="cliente-icon">ğŸ‘¤</span>
        <span class="cliente-label">Cliente</span>
      </div>
      <div class="cliente-info">
        <p class="cliente-nombre">{{ cotizacion.nombre || cotizacion['nombreCliente'] }}</p>
        <p class="cliente-empresa">{{ cotizacion.empresa }}</p>
        <p class="cliente-email">{{ cotizacion.email || cotizacion['emailCliente'] }}</p>
        <p class="cliente-rut">RUT: {{ cotizacion['rut'] || cotizacion['rutCliente'] }}</p>
      </div>
    </div>
    
    <!-- InformaciÃ³n de contacto -->
    <div class="contacto-section">
      <div class="contacto-header">
        <span class="contacto-icon">ğŸ“</span>
        <span class="contacto-label">Atendido por</span>
      </div>
      <p class="contacto-nombre">{{ cotizacion.atendido }}</p>
    </div>
    
    <!-- InformaciÃ³n financiera -->
    <div class="financiero-section">
      <div class="total-info">
        <div class="total-icon">ğŸ’°</div>
        <div class="total-content">
          <span class="total-label">Total</span>
          <span class="total-valor">{{ formatCurrency(cotizacion['total'] || cotizacion['valorTotal'] || cotizacion.valor) }}</span>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Acciones -->
  <div class="cotizacion-actions">
    <!-- Selector de estado -->
    <div class="estado-selector">
      <label for="estado-{{ cotizacion.id }}">Cambiar Estado:</label>
      <select 
        id="estado-{{ cotizacion.id }}"
        class="estado-select" 
        [value]="cotizacion.estado"
        (change)="onEstadoChange($event)">
        <option value="Emitida">ğŸ“„ Emitida</option>
        <option value="Contestada">ğŸ’¬ Contestada</option>
        <option value="En NegociaciÃ³n">ğŸ¤ En NegociaciÃ³n</option>
        <option value="Aceptada">âœ… Aceptada</option>
        <option value="Rechazada">âŒ Rechazada</option>
      </select>
    </div>
    
    <!-- Botones de acciÃ³n -->
    <div class="action-buttons">
      <button class="btn-action btn-info" (click)="verPDF()" title="Ver PDF">
        <span class="btn-icon">ğŸ“„</span>
        <span class="btn-text">PDF</span>
      </button>
      
      <button class="btn-action btn-success" (click)="generarContrato()" title="Generar Contrato">
        <span class="btn-icon">ğŸ“‹</span>
        <span class="btn-text">Contrato</span>
      </button>
      
      <button class="btn-action btn-warning" (click)="editarCotizacion()" title="Editar">
        <span class="btn-icon">âœï¸</span>
        <span class="btn-text">Editar</span>
      </button>
      
      <button class="btn-action btn-danger" (click)="eliminarCotizacion()" title="Eliminar">
        <span class="btn-icon">ğŸ—‘ï¸</span>
        <span class="btn-text">Eliminar</span>
      </button>
    </div>
  </div>
  
  <!-- Indicador de drag -->
  <div class="drag-indicator">
    <span class="drag-icon">â†•ï¸</span>
    <span class="drag-text">Arrastrar para cambiar estado</span>
  </div>
</div>
